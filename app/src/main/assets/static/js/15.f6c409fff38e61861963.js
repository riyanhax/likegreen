webpackJsonp([15],{nASG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("i84Q"),i={data:function(){return{list:[],commonName:"我也来评论两句",show:!1,id:null,content:"",lastPage:1,page:1,total:1}},components:{VCommon:n("tZqG").a},methods:{init:function(){var t=this;Object(o.a)("/comment/appCommentList",{noteType:this.$route.query.type,page:1,pdId:this.$route.params.id}).then(function(e){e.object.list.map(function(t){var e=new Date(t.time);t.time=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}),t.list=e.object.list,t.lastPage=e.object.lastPage,t.total=e.object.total})},release:function(){var t=this;Object(o.a)("/comment/appAddComment",{token:sessionStorage.token,content:this.content,pdId:this.$route.params.id,noteType:this.$route.query.type}).then(function(e){t.$store.state.isLoading=!1,100==e.code?(t.show=!1,mui.toast(e.object),t.$router.go()):mui.toast(e.msg)})},hide:function(){this.show=!1},commentItem:function(t){this.commonName="回复"+t.userName+":",this.id=t.comId,this.show=!0},submit:function(t,e){var n=this;this.$store.state.isLoading=!0,null!=e?Object(o.a)("/comment/appReturnCommnet",{token:sessionStorage.token,content:t,cId:e}).then(function(t){n.$store.state.isLoading=!1,100==t.code?(n.show=!1,n.$router.go()):mui.toast(t.msg)}):Object(o.a)("/comment/appAddComment",{token:sessionStorage.token,content:t,pdId:this.info.note_id,noteType:this.info.note_type}).then(function(t){n.$store.state.isLoading=!1,100==t.code?(n.show=!1,mui.toast(t.object),n.info.comment_count++):mui.toast(t.msg)})},pullupRefresh:function(){var t=this;this.lastPage!=this.page?Object(o.a)("/comment/appCommentList",{noteType:this.$route.query.type,page:this.page++,pdId:this.$route.params.id}).then(function(e){mui("#commentMore").pullRefresh().endPullupToRefresh(),e.object.list.map(function(t){var e=new Date(t.comment.time);t.comment.time=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}),t.list=t.list.concat(e.object.list)}):mui("#commentMore").pullRefresh().endPullupToRefresh(!0)},pulldownRefresh:function(){var t=this;Object(o.a)("/comment/appCommentList",{noteType:this.$route.query.type,page:1,pdId:this.$route.params.id}).then(function(e){mui("#commentMore").pullRefresh().endPulldownToRefresh(),e.object.map(function(t){var e=new Date(t.comment.time);t.comment.time=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}),t.list=e.object})}},mounted:function(){var t=this;this.init(),this.$nextTick(function(){mui.init({pullRefresh:{container:"#commentMore",up:{height:40,auto:!1,contentrefresh:"正在加载...",contentnomore:"没有更多数据了",callback:t.pullupRefresh},down:{contentdown:"下拉可以刷新",contentover:"释放立即刷新",contentrefresh:"正在刷新…",auto:!1,callback:t.pulldownRefresh}}})})},created:function(){for(var t,e=mui.hooks.inits.length-1;e>=0;e--)"pullrefresh"==(t=mui.hooks.inits[e]).name&&(t.repeat=!0)}},s={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"header"},[o("div",{staticClass:"icon-left",on:{click:function(e){t.$router.goBack()}}},[o("img",{attrs:{src:n("U1zf")}})]),t._v("\n\t\t更多评论\n\t\t"),o("div")]),t._v(" "),o("div",{staticClass:"header-null"}),t._v(" "),o("div",{staticClass:"more-header"},[o("img",{attrs:{src:n("HT3p")}}),t._v(" "),o("div",[t._v("全部评论("+t._s(t.total)+")")])]),t._v(" "),o("div",{staticClass:"detail-content-body1-comment"},[o("div",{staticClass:"mui-content mui-scroll-wrapper",attrs:{id:"commentMore"}},[o("div",{staticClass:"mui-scroll"},[o("div",{staticClass:"forum-comment-list"},t._l(t.list,function(e,n){return o("div",{staticClass:"forum-comment-list-item",on:{tap:function(n){t.commentItem(e.comment)}}},[t._m(0,!0),t._v(" "),o("div",[o("div",{staticClass:"item-title"},[t._v(t._s(e.user_name))]),t._v(" "),o("div",{staticClass:"item-date"},[t._v(t._s(e.time))]),t._v(" "),2==e.type?o("div",{staticClass:"item-huifu"},[t._v("\n\t\t\t\t\t\t\t\t回复"+t._s(e.pcUserName)+"："+t._s(e.content)+"\n\t\t\t\t\t\t\t")]):o("div",{staticClass:"item-huifu"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.content)+"\n\t\t\t\t\t\t\t")]),t._v(" "),2==e.type?o("div",{staticClass:"item-item-child"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.pcUserName)+"："+t._s(e.pContent)+"\n\t\t\t\t\t\t\t")]):t._e()])])}))])])]),t._v(" "),o("div",{staticClass:"fixed"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{type:"text",name:"",id:"",placeholder:t.commonName},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),o("div",{on:{tap:t.release}},[t._v("发表")])]),t._v(" "),o("v-common",{attrs:{dialog:t.show,id:t.id,placeholder:t.commonName},on:{hide:t.hide,submit:t.submit}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{attrs:{src:n("QGiS")}})])}]};var a=n("VU/8")(i,s,!1,function(t){n("nguK")},"data-v-7a8a4944",null);e.default=a.exports},nguK:function(t,e){}});
//# sourceMappingURL=15.f6c409fff38e61861963.js.map